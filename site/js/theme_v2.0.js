(()=>{"use strict";(()=>{if(!["localhost","techie-joe.github.io","themejs.pages.dev"].find((e=>window.location.host.endsWith(e))))return;const e=window,t=document,r=t.documentElement||t.body,s=e=>typeof e,a=e=>Object.prototype.toString.call(e),n="",o=s(n),c=a([]),i=e=>s(e)===o,m=Array.isArray||(e=>a(e)===c),l=e=>{throw"Fail to "+e},d=(e,t,r,s)=>{e.addEventListener(t,r,s)},h=(e,t)=>new RegExp(e,t),g=(e,t,r)=>{try{const s=" ",a="|",o="g",c=h("[\\.\\|\\s]+",o),i=(e,t=a)=>e.trim().replace(c,t).trim(),m=r?i(r,s):n,l=t?i([t,m].join(s)).trim():n,d=h("(^|\\s+)("+l+")(\\s*("+l+"))*(\\s+|$)",o),g=e.className.replace(d,s).trim()+(m.length?s+m:n);return e.className=g,e}catch(e){l("updateClass")}},u=(e,t,r)=>{e.setAttribute(t,r)},p=(()=>{const{localStorage:t}=e,r=e=>{e?t.removeItem(e):l("remove "+e)};return{set:(e,s)=>{e?i(s)?t.setItem(e,s):r(e):l("set "+e)},get:e=>e?t.getItem(e):(l("get "+e),null),remove:r}})();(()=>{const s="theme",a="themes",o="_dark",c="color-scheme",l=(E=(()=>{var e=t.getElementById("_color_scheme");if(!e){var r=t.getElementsByName(c);m(r)&&(e=r[r.length-1])}if(!e){e=t.createElement("meta");var s=[["name",c]];for(var a in s)u(e,s[a][0],s[a][1]);t.head&&t.head.appendChild(e)}return e})(),{set:e=>{E&&u(E,"content",e)}}),h=(e,t)=>{var o=N||n;m(e)&&(b=e,p.set(a,JSON.stringify(b)),e=b[i(t)?b.indexOf(t||n):0]),N=i(e)&&e||n,g(r,o,N),y(N),p.set(s,N)},v=()=>{h(b[b.indexOf(N||n)+1]||n)},y=e=>{e&&"_d"===e.substring(0,2)?l.set("dark"):l.set("light")},f=e.matchMedia("(prefers-color-scheme: dark)");var E,w=(e=>{try{return e&&JSON.parse(e)}catch(t){console.error("Fail to parse stored themes: "+e)}return null})(p.get(a)),O=p.get(s),b=w||[o],N=i(O)?O:f.matches?o:n;t.addEventListener("DOMContentLoaded",(()=>{g(r,"_hidden",N),y(N)})),d(f,"change",(e=>{e.matches?h(o):h()})),d(e,"keyup",(e=>{e.altKey&&"KeyT"===e.code&&v()})),e.theme={reset:()=>{b=[o];var e=N||n;N=f.matches?o:n,g(r,e,N),y(N),p.remove(s),p.remove(a)},set:h,change:v,list:()=>b,current:()=>N,fn:{updateClass:g,storage:p}}})()})()})();